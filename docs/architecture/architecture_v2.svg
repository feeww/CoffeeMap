<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 480" width="850" height="480">
  <defs>
    <linearGradient id="clientGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4A90D9;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#357ABD;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="serverGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#5CB85C;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#449D44;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="externalGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F0AD4E;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#EC971F;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-10%" y="-10%" width="120%" height="120%">
      <feDropShadow dx="2" dy="3" stdDeviation="4" flood-opacity="0.15"/>
    </filter>
    <marker id="arrowBlack" markerWidth="10" markerHeight="10" refX="8" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#495057"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="850" height="480" fill="#ffffff"/>
  
  <!-- Title -->
  <text x="425" y="40" font-family="'Segoe UI', Arial, sans-serif" font-size="26" font-weight="700" fill="#2c3e50" text-anchor="middle">CoffeeMap</text>
  <text x="425" y="62" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="#6c757d" text-anchor="middle">System Architecture</text>
  
  <!-- User Icon - moved up -->
  <g transform="translate(55, 160)">
    <circle cx="30" cy="18" r="16" fill="#6c757d"/>
    <ellipse cx="30" cy="55" rx="22" ry="18" fill="#6c757d"/>
    <text x="30" y="95" font-family="'Segoe UI', Arial, sans-serif" font-size="13" fill="#2c3e50" text-anchor="middle" font-weight="600">User</text>
  </g>
  
  <!-- Client Box -->
  <g transform="translate(150, 110)">
    <rect width="180" height="200" rx="12" fill="url(#clientGrad)" filter="url(#shadow)"/>
    <text x="90" y="35" font-family="'Segoe UI', Arial, sans-serif" font-size="16" fill="white" text-anchor="middle" font-weight="700">Frontend</text>
    
    <!-- Client Components -->
    <rect x="15" y="55" width="150" height="40" rx="6" fill="rgba(255,255,255,0.95)"/>
    <text x="90" y="80" font-family="'Segoe UI', Arial, sans-serif" font-size="12" fill="#357ABD" text-anchor="middle" font-weight="600">Leaflet.js Map</text>
    
    <rect x="15" y="105" width="150" height="40" rx="6" fill="rgba(255,255,255,0.95)"/>
    <text x="90" y="130" font-family="'Segoe UI', Arial, sans-serif" font-size="12" fill="#357ABD" text-anchor="middle" font-weight="600">UI Components</text>
    
    <rect x="15" y="155" width="150" height="30" rx="6" fill="rgba(255,255,255,0.7)"/>
    <text x="90" y="175" font-family="'Segoe UI', Arial, sans-serif" font-size="11" fill="#357ABD" text-anchor="middle">Vanilla JS + CSS</text>
  </g>
  
  <!-- Server Box -->
  <g transform="translate(400, 130)">
    <rect width="160" height="160" rx="12" fill="url(#serverGrad)" filter="url(#shadow)"/>
    <text x="80" y="35" font-family="'Segoe UI', Arial, sans-serif" font-size="16" fill="white" text-anchor="middle" font-weight="700">Backend</text>
    
    <rect x="15" y="55" width="130" height="40" rx="6" fill="rgba(255,255,255,0.95)"/>
    <text x="80" y="80" font-family="'Segoe UI', Arial, sans-serif" font-size="12" fill="#449D44" text-anchor="middle" font-weight="600">REST API</text>
    
    <rect x="15" y="105" width="130" height="40" rx="6" fill="rgba(255,255,255,0.95)"/>
    <text x="80" y="130" font-family="'Segoe UI', Arial, sans-serif" font-size="12" fill="#449D44" text-anchor="middle" font-weight="600">API Proxy</text>
  </g>
  
  <!-- External APIs -->
  <g transform="translate(630, 100)">
    <rect width="170" height="80" rx="12" fill="url(#externalGrad)" filter="url(#shadow)"/>
    <text x="85" y="32" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="700">Overpass API</text>
    <text x="85" y="52" font-family="'Segoe UI', Arial, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">OpenStreetMap</text>
    <text x="85" y="68" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.7)" text-anchor="middle">POI Data</text>
  </g>
  
  <g transform="translate(630, 210)">
    <rect width="170" height="80" rx="12" fill="url(#externalGrad)" filter="url(#shadow)"/>
    <text x="85" y="32" font-family="'Segoe UI', Arial, sans-serif" font-size="14" fill="white" text-anchor="middle" font-weight="700">Nominatim API</text>
    <text x="85" y="52" font-family="'Segoe UI', Arial, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">OpenStreetMap</text>
    <text x="85" y="68" font-family="'Segoe UI', Arial, sans-serif" font-size="10" fill="rgba(255,255,255,0.7)" text-anchor="middle">Geocoding</text>
  </g>
  
  <!-- Arrows with labels -->
  <!-- User to Client - arrow now centered with user -->
  <line x1="115" y1="210" x2="145" y2="210" stroke="#495057" stroke-width="2" marker-end="url(#arrowBlack)"/>
  <text x="130" y="198" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#6c757d" text-anchor="middle">HTTPS</text>
  
  <!-- Client to Server -->
  <line x1="335" y1="210" x2="395" y2="210" stroke="#495057" stroke-width="2" marker-end="url(#arrowBlack)"/>
  <text x="365" y="198" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#6c757d" text-anchor="middle">REST API</text>
  
  <!-- Server to Overpass -->
  <line x1="565" y1="180" x2="625" y2="145" stroke="#495057" stroke-width="2" marker-end="url(#arrowBlack)"/>
  <text x="595" y="150" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#6c757d" text-anchor="middle">HTTP</text>
  
  <!-- Server to Nominatim -->
  <line x1="565" y1="240" x2="625" y2="255" stroke="#495057" stroke-width="2" marker-end="url(#arrowBlack)"/>
  <text x="595" y="270" font-family="'Segoe UI', Arial, sans-serif" font-size="9" fill="#6c757d" text-anchor="middle">HTTP</text>
  
  <!-- Data Flow Description - properly aligned -->
  <g transform="translate(50, 380)">
    <rect width="750" height="80" rx="10" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1"/>
    <text x="375" y="28" font-family="'Segoe UI', Arial, sans-serif" font-size="13" fill="#2c3e50" text-anchor="middle" font-weight="600">Data Flow</text>
    
    <!-- Evenly distributed text items -->
    <text x="94" y="58" font-family="'Segoe UI', Arial, sans-serif" font-size="11" fill="#495057" text-anchor="middle">
      <tspan font-weight="600">1.</tspan> User interacts with map
    </text>
    <text x="281" y="58" font-family="'Segoe UI', Arial, sans-serif" font-size="11" fill="#495057" text-anchor="middle">
      <tspan font-weight="600">2.</tspan> Client requests data via API
    </text>
    <text x="469" y="58" font-family="'Segoe UI', Arial, sans-serif" font-size="11" fill="#495057" text-anchor="middle">
      <tspan font-weight="600">3.</tspan> Server proxies to OSM
    </text>
    <text x="656" y="58" font-family="'Segoe UI', Arial, sans-serif" font-size="11" fill="#495057" text-anchor="middle">
      <tspan font-weight="600">4.</tspan> Results rendered
    </text>
  </g>
</svg>
